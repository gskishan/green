[
 {
  "docstatus": 0,
  "doctype": "CRM Form Script",
  "dt": "CRM Deal",
  "enabled": 1,
  "modified": "2024-05-27 10:34:32.941571",
  "name": "Create Quotation Button",
  "script": "function setupForm({doc, call, createToast, router}) {\n    const actions = []\n    \n    if(doc.status == \"Proposal/Quotation\"){\n        actions.push({\n            \"label\": \"Create Quotation\",\n            \"onClick\": async() => {\n                let creation = await call('green.custom_script.crm.deal.create_quotation', {\n                    doctype: 'CRM Deal',\n                    name: doc.name\n                })\n                if(creation.success){\n                    await createToast({\n                      title: __('Created Quotation successfully'),\n                      icon: 'check',\n                      iconClasses: 'text-green-600',\n                    })\n                    setTimeout(()=>window.location.reload(), 1000);\n                    \n                    \n                }\n            }\n        })\n    }\n    \n    return {\n        actions,\n    }\n}\n",
  "view": "Form"
 }
]